<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>String V4 A00</title>

<style>
body { font-family: Arial, sans-serif; margin: 30px; background:#1e1e1e; color:#e0e0e0; }
h2 { margin-bottom: 20px; }
table { border-collapse: collapse; width: 100%; max-width: 1200px; }
th { background:#3a3a3a; color:#fff; padding:5px 8px; }
td { border:1px solid #444; padding:4px 8px; background:#2b2b2b; color:#e0e0e0; }
.input-name { background:#fff2cc; font-weight:bold; width:25%; color:#1a1a1a; font-size:11px; }
.selection { background:#fff2cc; width:35%; position:relative; color:#1a1a1a; font-size:12px; }
.info { background:#fce4d6; width:40%; font-size:12px; color:#1a1a1a; }
select, input { width:95%; padding:2px; font-size:12px; }
textarea { width:100%; height:90px; margin-top:10px; font-family:Consolas, monospace; background:#2b2b2b; color:#e0e0e0; border:1px solid #555; }
.textarea-row { display:flex; gap:10px; margin-top:10px; max-width:1000px; }
.textarea-row textarea { flex:1; margin-top:0; }
button { padding:8px 16px; margin:10px 10px 0 0; cursor:pointer; background:#3a3a3a; color:#e0e0e0; border:1px solid #555; border-radius:4px; }
#generateBtn:disabled { opacity:0.4; cursor:not-allowed; }
button:hover:not(:disabled) { background:#505050; }
.hidden { display:none; }

.dropdown-list {
  position:absolute;
  background:#2b2b2b;
  border:1px solid #555;
  max-height:150px;
  overflow-y:auto;
  width:95%;
  z-index:1000;
}
.dropdown-item { padding:6px; cursor:pointer; color:#e0e0e0; }
.dropdown-item:hover { background:#3d3d3d; }

.radio-group label { margin-right:15px; }

/* Marquee */
.marquee-wrap {
  overflow: hidden;
  white-space: nowrap;
  margin-bottom: 20px;
}
.marquee-text {
  display: inline-block;
  font-size: 1.5em;
  font-weight: bold;
  color: #0096FF;
  animation: marquee 24s linear infinite;
}
@keyframes marquee {
  0%   { transform: translateX(100vw); }
  100% { transform: translateX(-100%); }
}

/* Follow-up checkbox row */
.followup-inline {
  display: flex;
  align-items: center;
  gap: 6px;
  font-size: 13px;
}

/* Horizontal radio groups: Text â†’ Radio */
.radio-horizontal {
  display: flex;
  flex-wrap: wrap;
  gap: 22px;
}
.radio-horizontal label {
  display: flex;
  align-items: center;
  gap: 0px;
  font-size: 12px;
  cursor: pointer;
  white-space: nowrap;
}
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.15; }
}
@keyframes blink {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0; }
}
.pulse-text {
  display: inline;
  animation: pulse 2s ease-in-out 5;
  color: #800020;
  font-weight: bold;
}
.blink-text {
  display: inline;
  animation: blink 1s step-end 5;
  color: #800020;
  font-weight: bold;
}
</style>
</head>

<body>

<div style="display:flex; align-items:center; gap:20px; margin-bottom:20px;">
  <img src="Cons REC.png" alt="Logo" style="height:70px; width:auto;">
  <div class="marquee-wrap" style="flex:1; margin-bottom:0;"><span class="marquee-text">Consumer REC String Generator v4.0 ***Do Not Share- Subject to NDA***</span></div>
</div>

<table>
<tr><th>Input Name</th><th>Your Selection</th><th>Info Details</th></tr>

<tr>
<td class="input-name">Follow-Up Required</td>
<td class="selection">
<div class="radio-horizontal">
<label>No<input type="radio" name="followUp" id="followNo" value="No" checked onchange="toggleDate()"></label>
<label>Yes<input type="radio" name="followUp" id="followYes" value="Yes" onchange="toggleDate()"></label>
</div>
<input type="date" id="followDate" class="hidden" style="margin-top:6px;">
</td>
<td class="info">If checked, selected date will prefix the output</td>
</tr>

<!-- NEW ROW: Followup Priority -->
<tr id="priorityRow" class="hidden">
<td class="input-name">Followup Priority</td>
<td class="selection">
<div class="radio-horizontal">
<label>P1 <input type="radio" name="followPriority" value="P1" checked></label>
<label>P2 <input type="radio" name="followPriority" value="P2"></label>
<label>P3 <input type="radio" name="followPriority" value="P3"></label>
<label>Dispatch Followup <input type="radio" name="followPriority" value="DF"></label>
<label>FA Capture <input type="radio" name="followPriority" value="FAC"></label>
</div>
</td>
<td class="info">Priority level for follow-up. P1 = *, P2 = **, P3 = *** appended after the date in output.</td>
</tr>

<tr>
<td class="input-name">Country*</td>
<td class="selection">
<select id="country" onchange="checkGenerate()">
<option value="">-- Select --</option>
<option>APJ Other</option>
<option>Argentina</option>
<option>Australia</option>
<option>Austria</option>
<option>Belgium</option>
<option>Brazil</option>
<option>Canada</option>
<option>Chile</option>
<option>China</option>
<option>Colombia</option>
<option>Czech Republic</option>
<option>Denmark</option>
<option>EMEA Other</option>
<option>France</option>
<option>Germany</option>
<option>Greece</option>
<option>Hong Kong</option>
<option>India</option>
<option>Indonesia</option>
<option>Ireland</option>
<option>Israel</option>
<option>Italy</option>
<option>Japan</option>
<option>Korea</option>
<option>LA Other</option>
<option>Luxemburg</option>
<option>Malaysia</option>
<option>Mexico</option>
<option>Netherlands</option>
<option>New Zealand</option>
<option>Norway</option>
<option>Peru</option>
<option>Poland</option>
<option>Portugal</option>
<option>Romania</option>
<option>Saudi Arabia</option>
<option>Singapore</option>
<option>Slovakia</option>
<option>South Africa</option>
<option>Spain</option>
<option>Sweden</option>
<option>Switzerland</option>
<option>Taiwan</option>
<option>Thailand</option>
<option>Turkey</option>
<option>United Arab Emirates</option>
<option>United Kingdom</option>
<option>United States</option>
</select>
</td>
<td class="info">Select Customer's Country</td>
</tr>

<tr>
<td class="input-name">Escalation From*</td>
<td class="selection">
<div class="radio-horizontal">
<label>TS <input type="radio" name="escalationFrom" value="TS" checked></label>
<label>ARS <input type="radio" name="escalationFrom" value="ARS"></label>
<label>Sales <input type="radio" name="escalationFrom" value="Sales"></label>
<label>AQE/SSE/PG <input type="radio" name="escalationFrom" value="AQE/SSE/PG"></label>
</div>
</td>
<td class="info">Mandatory. Default is TS</td>
</tr>

<tr>
<td class="input-name">Issue Type*</td>
<td class="selection">
<input type="text" id="issue" placeholder="Type to search..." oninput="filterIssue()" autocomplete="off">
<div id="issueList" class="dropdown-list hidden"></div>
</td>
<td class="info">Type to search (substring supported)</td>
</tr>

<tr><td class="input-name">Reference KB/PSQN/AEW</td><td class="selection"><input id="kb"></td><td class="info">Numeric KB, Pls fill only numeric value (Example : 000432435)</td></tr>
<tr><td class="input-name">Reference SITM</td><td class="selection"><input id="sitm" oninput="updateSitmInfo()"></td><td class="info" id="sitmInfo">Numeric SITM (Example : For SITM-8800, pls fill in 8800)</td></tr>
<tr><td class="input-name">CIPS created by you</td><td class="selection"><input id="cips" oninput="updateCipsInfo()"></td><td class="info" id="cipsInfo">CIPS reference</td></tr>

<tr>
<td class="input-name">Further Escalation*</td>
<td class="selection">
<select id="escalation">
<option value="">-- Select --</option>
<option>TBF</option><option selected>NA</option><option>IPS</option>
<option>Factory</option><option>MIRK</option>
<option>PG</option><option>SPM/PM/PdM</option><option>Other</option>
</select>
</td>
<td class="info">Indicate if case was escalated</td>
</tr>

<tr>
<td class="input-name">FA Capture*</td>
<td class="selection">
<select id="fa" onchange="updateFaInfo()">
<option value="">-- Select --</option>
<option>Yes</option>
<option selected>No</option>
</select>
</td>
<td class="info" id="faInfo">Failure Analysis captured</td>
</tr>

<tr>
<td class="input-name">Solution Given**</td>
<td class="selection">
<select id="solution">
<option value="">-- Select --</option>
<option selected>TBF</option>
<option>Hard Fix -Dispatch</option>
<option>Hard Fix -Non Dispatch</option>
<option>Approval</option>
<option>Dell IT Ticket</option>
<option>Escalation Reviewed</option>
<option>Guidance - Soft &amp; Hard Fixes</option>
<option>i-Rev Advanced Firmware/Driver</option>
<option>KB Reference</option>
<option>MIRK Approval</option>
<option>New Solution</option>
<option>No Update from Customer</option>
<option>No Update from TS</option>
<option>Other</option>
<option>Soft Fix-OSRI</option>
<option>Soft Fix-BIOS/Driver Update</option>
<option>Soft Fix-Other</option>
<option>System Exchange</option>
<option>WAD</option>
</select>
</td>
<td class="info">Resolution provided to customer</td>
</tr>

<tr>
<td class="input-name">Feedback to Submitter**</td>
<td class="selection">
<select id="feedback">
<option value="">-- Select --</option>
<option selected>FB.F01_NA</option>
<option>FB.F02_Duplicate L3 IC</option>
<option>FB.F03_Existing Resources not used</option>
<option>FB.F04_Incomplete Information</option>
<option>FB.F05_Incorrect Process Followed</option>
<option>FB.F06_Incorrect Troublshooting</option>
<option>FB.F07_Invalid L3 Trigger</option>
<option>FB.Q01_Previouse recommendation not followed</option>
<option>FB.Q02_QRT Feedback - Missing Logs/Pictures/Vital Details</option>
<option>FB.Q03_QRT Feedback - Incorrect Routing</option>
<option>FB.Q04_QRT Feedback - Other</option>
<option>FB.Q05_QRT Feedback - Existing Resource Not used</option>
</select>
</td>
<td class="info">Was feedback provided to submitter</td>
</tr>

<tr>
<td class="input-name">Tool/Solution Opportunity**</td>
<td class="selection">
<select id="tool">
<option value="">-- Select --</option>
<option>TBF</option><option selected>NA</option>
<option>DTC/Boomi</option><option>KB/PSQN</option>
<option>SA/SAOSR</option><option>CTK/TTK</option><option>Other</option>
</select>
</td>
<td class="info">Any improvement opportunity identified</td>
</tr>

<tr>
<td class="input-name">CLCA Required**</td>
<td class="selection">
<select id="clca">
<option value="">-- Select --</option>
<option>TBF</option><option selected>No</option><option>Yes</option>
</select>
</td>
<td class="info">Corrective/Preventive action required</td>
</tr>

</table>

<button id="generateBtn" onclick="generateOutput()" disabled>Generate Output</button>
<button onclick="copyOutput()">Copy String</button>
<button onclick="reverseFill()">Reverse Fill</button>
<button onclick="resetForm()">Reset</button>

<div class="textarea-row"><textarea id="output" readonly></textarea><textarea id="reverseInput" placeholder="Paste string here"></textarea><div style="display:flex; align-items:center; padding-left:10px;"><a href="https://dell.sharepoint.com/sites/L3String/Lists/String%20Issue%20Register/AllItems.aspx" target="_blank" style="display:inline-block; padding:8px 14px; background:#3a3a3a; color:#f0a500; border:1px solid #555; border-radius:4px; text-decoration:none; font-family:Arial,sans-serif; font-size:13px; white-space:nowrap;">ðŸ“‹ Feedback</a></div></div>

<script>eval(atob("CmNvbnN0IGlzc3VlT3B0aW9ucyA9IFsKIjNyZCBQYXJ0eSBIYXJkd2FyZSIsIjNyZCBQYXJ0eSBTb2Z0d2FyZSIsIkFDIEFkYXB0ZXIgTm8gUG93ZXIiLCJBQyBBZGFwdGVyIE5vdCBEZXRlY3RlZCIsIkFudGl2aXJ1cyBSZWxhdGVkIiwiQXVkaW8gRGlzdG9ydGlvbiAiLCJBdWRpbyBJc3N1ZSBPdGhlciIsIkFXQ0MgRlggUmVsYXRlZCIsIkJhdHRlcnkgQmFja3VwIElzc3VlIiwiQmF0dGVyeSBEZXRlY3Rpb24gSXNzdWUiLCJCYXR0ZXJ5IElzc3VlIE90aGVyIiwiQmlvbWV0cmljcyBGaW5nZXJwcmludCBSZWFkZXIgSXNzdWUiLCJCSU9TIElzc3VlcyIsIkJJT1MgUGFzc3dvcmQiLCJCaXRMb2NrZXIgRGV2aWNlIEVuY3J5cHRpb24gIiwiQmx1ZXRvb3RoIENvbm5lY3Rpdml0eSBJc3N1ZSIsIkJsdWV0b290aCBEZXRlY3Rpb24gSXNzdWUiLCJCbHVldG9vdGggT3RoZXIiLCJCcm93c2VyIENocm9tZSBJc3N1ZSIsIkJyb3dzZXIgRWRnZSBJc3N1ZSIsIkJTT0QgSW50ZXJtaXR0ZW50ICIsIkJTT0QgTm8gYm9vdCAiLCJDb3NtZXRpYyBJc3N1ZSIsIkRhbWFnZSIsIkRlbGwgQ29tbWFuZCBVcGRhdGUiLCJEZWxsIERpc3BsYXkgYW5kIFBlcmlwaGVyYWwgTWFuYWdlciAtIE1BQyIsIkRlbGwgRGlzcGxheSBhbmQgUGVyaXBoZXJhbCBNYW5hZ2VyIOKAkyBXaW5kb3dzIiwiRGVsbCBPcHRpbWl6ZXIiLCJEZWxsIFBlcmlwaGVyYWwiLCJEZWxsIFBlcmlwaGVyYWwg4oCTIEFjdGl2ZSBQZW4gU3R5bHVzIiwiRGVsbCBQZXJpcGhlcmFsIOKAkyBIZWFkc2V0IiwiRGVsbCBQZXJpcGhlcmFsIC0gU3BlYWtlcnMiLCJEZWxsIFN1cHBsaWVkIE5vbiBEZWxsIEFwcCAoRG8gbm90IHNlbGVjdCB0aGlzIGZvciBNU08pIiwiRGVsbCBUb29scyAtIEFXQ0MgQXBwbGljYXRpb24gSXNzdWUiLCJEZWxsIFRvb2xzIC0gQVdDQyBJbnN0YWxsYXRpb24gaXNzdWUiLCJEZWxsIFRvb2xzIC0gRGVsbCBEaWdpdGFsIERlbGl2ZXJ5IERERCIsIkRlbGwgVG9vbHMgLSBEZWxsIE1vYmlsZSBDb25uZWN0IERNQyIsIkRlbGwgVG9vbHMgLSBEZWxsIFNBIE9TIFJlY292ZXJ5IFNBT1NSIiwiRGVsbCBUb29scyAtIERlbGwgU3VwcG9ydEFzc2lzdCBTQSIsIkRlbGwgVG9vbHMgLSBlRGlhZ3MiLCJEZWxsIFRvb2xzIC0gaURpYWdzIiwiRGVsbCBUb29scyAtIE15IERlbGwgQXBwIiwiRGVsbCBUb29scyAtIFNBIERlbGwgRGF0YSBBc3Npc3RhbnQgIEREQSIsIkRpc3BhdGNoIE9SIFBhcnQgUmV2aWV3IiwiRGlzcGxheSBGbGlja2VyaW5nIiwiRGlzcGxheSBMaWdodCBsZWFrYWdlIC8gTXVyYSIsIkRvY2tpbmcgU3RhdGlvbnMgT3RoZXIiLCJEcml2ZXIgSXNzdWVzIiwiRWxlY3RyaWMgU2hvY2stU2Vuc2F0aW9uIiwiZVBTQS9vbmJvYXJkIERpYWdzIElzc3VlIiwiRXNjYWxhdGlvbiBSZXZpZXciLCJFdGhlcm5ldCBJc3N1ZSIsIkZhbiBpc3N1ZSIsIkdhbWluZyBSZWxhdGVkIiwiR3JhcGhpY3MgQ2FyZCAtIE90aGVyIiwiR3JhcGhpY3MgQ2FyZC0gRlBTIHJlbGF0ZWQiLCJIYXJkd2FyZSBVcGdyYWRlLSBDb21wYXRpYmlsaXR5IFF1ZXJ5IiwiSEREIElzc3VlIiwiSEREIFBhc3N3b3JkIiwiSW5wdXQgZGV2aWNlcyAvIENhcmQgUmVhZGVyLyBFdGMuIiwiS2V5Ym9hcmQgQmFja2xpdCBJc3N1ZSIsIktleWJvYXJkIERldGVjdGlvbiIsIktleWJvYXJkIE90aGVyIiwiS2V5cyBub3Qgd29ya2luZyIsIkxDRC1JbnRlcm5hbCBEaXNwbGF5IFJlbGF0ZWQiLCJMRkkgUmVsYXRlZCIsIk1jQWZlZSBBY3RpdmF0aW9uIiwiTWNBZmVlIEFwcGxpY2F0aW9uIElzc3VlIiwiTWVjaGFuaWNhbCBDaGFzc2lzIGlzc3VlIiwiTWVjaGFuaWNhbCBDaGFzc2lzIGlzc3VlLSBIaW5nZSBSZWxhdGVkIiwiTWVtb3J5IElzc3VlIiwiTWljIGlzc3VlIiwiTW9uaXRvciBCbGFjayBTcG90IiwiTW9uaXRvciBGbGlja2VyaW5nICIsIk1vbml0b3IgTm8gRGlzcGxheSIsIk1vbml0b3IgUGl4ZWwgSXNzdWUiLCJNb3VzZSBpc3N1ZSAoTm90IHRvdWNocGFkKSIsIk1TIENvcGlsb3QiLCJNUyBPZmZpY2UgQWN0aXZhdGlvbiBJc3N1ZXMiLCJNUyBPZmZpY2UgSXNzdWVzIiwiTXVsdGkgTW9uaXRvciBTZXR1cCBJc3N1ZSAiLCJOZXR3b3JrIC0gV0xBTiBDb25uZWN0aXZpdHkiLCJOZXR3b3JrIC0gV0xBTiBTcGVlZCIsIk5ldHdvcmstIExBTiBJc3N1ZSIsIk5ldHdvcmstIE5ldHdvcmsgc2V0dXAtU2hhcmluZyIsIk5ldHdvcmstIFdXQU4gSXNzdWUiLCJObyBBdWRpbyIsIk5vIEJvb3QiLCJObyBQb3N0IiwiTm8gUG93ZXIiLCJObyBWaWRlbyIsIk5vaXNlIElzc3VlcyAob3RoZXIgdGhhbiBGQU4pIiwiTm9uIERlbGwgUGVyaXBoZXJhbCIsIk9ERCBJc3N1ZXMiLCJPbmxpbmUgRGlhZ25vc3RpYyBFcnJvciIsIk9PQiBzZXR1cCIsIk9TIFJlbGF0ZWQiLCJPdGhlciIsIk90aGVyIEJyb3dzZXIgSXNzdWUiLCJPdGhlciBTdG9yYWdlIElzc3VlIiwiT3ZlcmNsb2NraW5nIFJlbGF0ZWQiLCJQYWludCBQZWVsICIsIlBlcmZvcm1hbmNlICAxMDAlIGRpc2sgdXNhZ2UiLCJQZXJmb3JtYW5jZSAgT3ZlcmhlYXRpbmciLCJQZXJmb3JtYW5jZS0gU2xvdyBQZXJmb3JtYW5jZSIsIlBlcmZvcm1hbmNlLSBTeXN0ZW0gRnJlZXppbmciLCJQblAgUmVsYXRlZCIsIlBvd2VyIFN1cHBseSBJc3N1ZSAoRGVza3RvcCkiLCJQcmludGVyIFJlbGF0ZWQiLCJQUk0vRlNNIFJlbGF0ZWQiLCJSQUlEIFJlbGF0ZWQiLCJSYW5kb20gU2h1dGRvd24vIFJlc3RhcnQiLCJSaXggQXBwcm92YWwiLCJTYWZldHkgSGF6YXJkIiwiU2Nhbm5lciBSZWxhdGVkIiwiU2NyZXcgUmVsYXRlZCIsIlNsZWVwIC8gSGliZXJuYXRpb24gSXNzdWVzIiwiU3BlYWtlciBJc3N1ZSIsIlNTRCBJc3N1ZSIsIlNTRCBQYXNzd29yZCIsIlN0b2xlbiBTeXN0ZW0gTUFDIElEIFJlcXVpcmVkIiwiVGVjaG5pY2FsIFF1ZXJ5IiwiVGhlcm1hbCBJc3N1ZXMgKE5vIFNodXRkb3duKSIsIlRoZXJtYWwgSXNzdWVzIChTaHV0ZG93bikiLCJUb2JpaSBSZWxhdGVkIiwiVG91Y2ggU2NyZWVuIElzc3VlIiwiVG91Y2hwYWQgRXJyYXRpYyBNb3ZlbWVudCIsIlRvdWNocGFkIE1pc2FsaWdubWVudCIsIlRvdWNocGFkIE5vIE1vdmVtZW50IiwiVG91Y2hwYWQgT3RoZXIiLCJUb3VjaHBhZCBTZWxmIENsaWNrIiwiVFBNIFJlbGF0ZWQiLCJVU0IgcG9ydCBpc3N1ZSIsIlZpcnR1YWxpemF0aW9uIiwiV2VhciBhbmQgVGVhciIsIldlYmNhbSBSZWxhdGVkIiwiV2luZG93cyBBY3RpdmF0aW9uIiwiV2luZG93cyBIZWxsbyBGYWNlIFJlY29nbml0aW9uIiwiV2luZG93cyBIZWxsbyBGUFIiLCJXaW5kb3dzIEhlbGxvIFBpbiIsIldpbmRvd3MgSGVsbG8gU2VjdXJpdHkgS2V5IiwiV2luZG93cyBVcGRhdGUiLCJEb2NraW5nIFN0YXRpb25zIE5vIHBvd2VyIiwiRG9ja2luZyBTdGF0aW9uIFBvcnQgTm90IFdvcmtpbmciLCJEb2NraW5nIFN0YXRpb24gTmV0d29yayBJc3N1ZSIsIk1vbml0b3IgQXV0byBCcmlnaHRuZXNzIiwiTW9uaXRvciBQb3J0IiwiTW9uaXRvciBObyBQb3dlciIsIk1vbml0b3IgTmV0d29yayBJc3N1ZSIsIk1vbml0b3IgV2ViY2FtIiwiTW9uaXRvciBTcGVha2VyIElzc3VlIiwiTW9uaXRvciBPdGhlciIsIk1vbml0b3IgTGluZXMgb24gRGlzcGxheSIsIk1vbml0b3IgRlBTIiwiTW9uaXRvciBHYW1pbmcgUmVsYXRlZCIsIk1vbml0b3IgSW1hZ2UgUmV0ZW50aW9uIiwiTW9uaXRvciBHIFN5bmMvRnJlZSBTeW5jL0FkYXB0aXZlIFN5bmMiLCJNb25pdG9yIEZpcm13YXJlIElzc3VlIiwiTW9uaXRvciBLVk0gSXNzdWUiCl07CgpmdW5jdGlvbiBmaWx0ZXJJc3N1ZSgpewogY29uc3QgaW5wdXQ9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlzc3VlIikudmFsdWUudG9Mb3dlckNhc2UoKTsKIGNvbnN0IGxpc3Q9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlzc3VlTGlzdCIpOwogbGlzdC5pbm5lckhUTUw9IiI7CiBpZighaW5wdXQpe2xpc3QuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7Y2hlY2tHZW5lcmF0ZSgpO3JldHVybjt9CiBjb25zdCBtYXRjaGVzPWlzc3VlT3B0aW9ucy5maWx0ZXIob3B0PT5vcHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpbnB1dCkpOwogbWF0Y2hlcy5mb3JFYWNoKG9wdD0+ewogICBjb25zdCBkaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgIGRpdi5jbGFzc05hbWU9ImRyb3Bkb3duLWl0ZW0iOwogICBkaXYudGV4dENvbnRlbnQ9b3B0OwogICBkaXYub25jbGljaz0oKT0+e2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJpc3N1ZSIpLnZhbHVlPW9wdDtsaXN0LmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpO2NoZWNrR2VuZXJhdGUoKTt9OwogICBsaXN0LmFwcGVuZENoaWxkKGRpdik7CiB9KTsKIGxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgiaGlkZGVuIixtYXRjaGVzLmxlbmd0aD09PTApOwogY2hlY2tHZW5lcmF0ZSgpOwp9CgpmdW5jdGlvbiBjaGVja0dlbmVyYXRlKCl7CiAgY29uc3QgY291bnRyeUZpbGxlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjb3VudHJ5IikudmFsdWUgIT09ICIiOwogIGNvbnN0IGlzc3VlRmlsbGVkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImlzc3VlIikudmFsdWUudHJpbSgpICE9PSAiIjsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ2VuZXJhdGVCdG4iKS5kaXNhYmxlZCA9ICEoY291bnRyeUZpbGxlZCAmJiBpc3N1ZUZpbGxlZCk7Cn0KCmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIixlPT57CiBpZighZS50YXJnZXQuY2xvc2VzdCgiI2lzc3VlIikpIGlzc3VlTGlzdC5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKCn0pOwoKY29uc3QgbWFwPXsKIGVzY2FsYXRpb25Gcm9tOntwOiJAMSIsczoiQDIifSwKIGNvdW50cnk6e3A6IisiLHM6IisifSwKIGlzc3VlOntwOiI8IixzOiI+W10ifSwKIGtiOntwOiJ8IixzOiJ8ezB9In0sCiBzaXRtOntwOiJTSVRNLSIsczoiUFNFLSJ9LAogY2lwczp7cDoiQ0lQUy0iLHM6IiJ9LAogZXNjYWxhdGlvbjp7cDoiJSIsczoiJSJ9LAogZmE6e3A6Ij8iLHM6Ij8ifSwKIHNvbHV0aW9uOntwOiI9IixzOiI9In0sCiBmZWVkYmFjazp7cDoiIixzOiI7In0sCiB0b29sOntwOiJYMTAxLzAwLzE5MDBYMlgxNCIsczoiWDE1In0sCiBjbGNhOntwOiJYMTYiLHM6IlgxNyJ9Cn07CgovLyBTaG93L2hpZGUgZGF0ZSArIHByaW9yaXR5IHJvdyB0b2dldGhlcgpmdW5jdGlvbiB0b2dnbGVEYXRlKCl7CiAgY29uc3QgY2hlY2tlZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb2xsb3dZZXMiKS5jaGVja2VkOwogIGZvbGxvd0RhdGUuY2xhc3NMaXN0LnRvZ2dsZSgiaGlkZGVuIiwgIWNoZWNrZWQpOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJwcmlvcml0eVJvdyIpLmNsYXNzTGlzdC50b2dnbGUoImhpZGRlbiIsICFjaGVja2VkKTsKfQoKZnVuY3Rpb24gZ2V0RXNjYWxhdGlvbkZyb20oKXsKIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPSJlc2NhbGF0aW9uRnJvbSJdOmNoZWNrZWQnKS52YWx1ZTsKfQoKZnVuY3Rpb24gZ2V0Rm9sbG93UHJpb3JpdHkoKXsKICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT0iZm9sbG93UHJpb3JpdHkiXTpjaGVja2VkJykudmFsdWU7Cn0KCmZ1bmN0aW9uIGdldFByaW9yaXR5U3RhcnMocHJpb3JpdHkpewogIGlmKHByaW9yaXR5ID09PSAiUDEiKSByZXR1cm4gIioiOwogIGlmKHByaW9yaXR5ID09PSAiUDIiKSByZXR1cm4gIioqIjsKICBpZihwcmlvcml0eSA9PT0gIlAzIikgcmV0dXJuICIqKioiOwogIGlmKHByaW9yaXR5ID09PSAiREYiKSByZXR1cm4gIl4iOwogIGlmKHByaW9yaXR5ID09PSAiRkFDIikgcmV0dXJuICJeXiI7CiAgcmV0dXJuICIqIjsKfQoKZnVuY3Rpb24gZ2VuZXJhdGVPdXRwdXQoKXsKIGxldCBvdXQ9IiI7CiBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9sbG93WWVzIikuY2hlY2tlZCAmJiBmb2xsb3dEYXRlLnZhbHVlKXsKICBjb25zdCBzdGFycyA9IGdldFByaW9yaXR5U3RhcnMoZ2V0Rm9sbG93UHJpb3JpdHkoKSk7CiAgb3V0Kz1mb2xsb3dEYXRlLnZhbHVlLnNsaWNlKDUsNykrIi8iK2ZvbGxvd0RhdGUudmFsdWUuc2xpY2UoOCkrIi8iK2ZvbGxvd0RhdGUudmFsdWUuc2xpY2UoMiw0KStzdGFycysiICI7CiB9CiBvdXQrPSJ2NENvblJFQy1Bbmx5cyI7CiBvdXQrPW1hcC5lc2NhbGF0aW9uRnJvbS5wK2dldEVzY2FsYXRpb25Gcm9tKCkrbWFwLmVzY2FsYXRpb25Gcm9tLnM7CgogZm9yKGxldCBpZCBpbiBtYXApewogIGlmKGlkPT09ImVzY2FsYXRpb25Gcm9tIikgY29udGludWU7CiAgY29uc3QgZWw9ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpOwogIGlmKGVsICYmIGVsLnZhbHVlLnRyaW0oKSl7CiAgIGNvbnN0IHZhbCA9IChpZD09PSJmZWVkYmFjayIpID8gZWwudmFsdWUudHJpbSgpLnN1YnN0cmluZygwLDYpIDogZWwudmFsdWUudHJpbSgpOwogICBvdXQrPW1hcFtpZF0ucCt2YWwrbWFwW2lkXS5zOwogIH0KIH0KIG91dHB1dC52YWx1ZT1vdXQ7Cn0KCmZ1bmN0aW9uIGNvcHlPdXRwdXQoKXsKICBjb25zdCBvdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgib3V0cHV0Iik7CiAgaWYoIW91dC52YWx1ZSkgcmV0dXJuOwogIG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KG91dC52YWx1ZSk7Cn0KCmZ1bmN0aW9uIHJldmVyc2VGaWxsKCl7CgogICAgbGV0IGlucHV0ID0gcmV2ZXJzZUlucHV0LnZhbHVlLnRyaW0oKTsKICAgIGlmKCFpbnB1dCkgcmV0dXJuOwoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV4dHJhY3QgRm9sbG93LXVwIERhdGUgKyBQcmlvcml0eSBTdGFycwogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgbGV0IGRhdGVNYXRjaCA9IGlucHV0Lm1hdGNoKC9eKFxkezJ9XC9cZHsyfVwvXGR7Mn0pKFwqezEsM318XF57MSwyfSlccysvKTsKICAgIGlmKGRhdGVNYXRjaCl7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvbGxvd1llcyIpLmNoZWNrZWQgPSB0cnVlOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb2xsb3dObyIpLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICB0b2dnbGVEYXRlKCk7CgogICAgICAgIC8vIENvbnZlcnQgTU0vREQvWVkgYmFjayB0byBZWVlZLU1NLUREIGZvciBkYXRlIGlucHV0CiAgICAgICAgbGV0IHBhcnRzID0gZGF0ZU1hdGNoWzFdLnNwbGl0KCIvIik7CiAgICAgICAgZm9sbG93RGF0ZS52YWx1ZSA9ICIyMCIgKyBwYXJ0c1syXSArICItIiArIHBhcnRzWzBdICsgIi0iICsgcGFydHNbMV07CgogICAgICAgIC8vIFJlc3RvcmUgcHJpb3JpdHkgZnJvbSBzdGFyIGNvdW50CiAgICAgICAgY29uc3Qgc3ltID0gZGF0ZU1hdGNoWzJdOwogICAgICAgIGNvbnN0IHByaW9yaXR5VmFsID0gc3ltID09PSAiXl4iID8gIkZBQyIgOiBzeW0gPT09ICJeIiA/ICJERiIgOiBzeW0ubGVuZ3RoID09PSAxID8gIlAxIiA6IHN5bS5sZW5ndGggPT09IDIgPyAiUDIiIDogIlAzIjsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdmb2xsb3dQcmlvcml0eSddIikuZm9yRWFjaChyPT57CiAgICAgICAgICAgIHIuY2hlY2tlZCA9IChyLnZhbHVlID09PSBwcmlvcml0eVZhbCk7CiAgICAgICAgfSk7CgogICAgICAgIGlucHV0ID0gaW5wdXQucmVwbGFjZShkYXRlTWF0Y2hbMF0sICcnKTsKICAgIH0gZWxzZSB7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvbGxvd05vIikuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvbGxvd1llcyIpLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICB0b2dnbGVEYXRlKCk7CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXh0cmFjdCBFc2NhbGF0aW9uIEZyb20KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGxldCBlc2NhbGF0aW9uTWF0Y2ggPSBpbnB1dC5tYXRjaCgvQDEoLio/KUAyLyk7CiAgICBpZihlc2NhbGF0aW9uTWF0Y2gpewogICAgICAgIGxldCBlc2NWYWwgPSBlc2NhbGF0aW9uTWF0Y2hbMV0udHJpbSgpOwogICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J2VzY2FsYXRpb25Gcm9tJ10iKS5mb3JFYWNoKHI9PnsKICAgICAgICAgICAgci5jaGVja2VkID0gKHIudmFsdWUgPT09IGVzY1ZhbCk7CiAgICAgICAgfSk7CiAgICAgICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC9AMS4qP0AyLywgJycpOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV4dHJhY3QgQ291bnRyeQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgbGV0IGNvdW50cnlNYXRjaCA9IGlucHV0Lm1hdGNoKC9cKyhbXitdKylcKy8pOwogICAgaWYoY291bnRyeU1hdGNoKXsKICAgICAgICBjb3VudHJ5LnZhbHVlID0gY291bnRyeU1hdGNoWzFdLnRyaW0oKTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBFeHRyYWN0IElzc3VlIFR5cGUKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGxldCBpc3N1ZU1hdGNoID0gaW5wdXQubWF0Y2goLzwoW14+XSspPi8pOwogICAgaWYoaXNzdWVNYXRjaCl7CiAgICAgICAgaXNzdWUudmFsdWUgPSBpc3N1ZU1hdGNoWzFdOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV4dHJhY3QgS0IKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGxldCBrYk1hdGNoID0gaW5wdXQubWF0Y2goL1x8KFxkKylcfC8pOwogICAgaWYoa2JNYXRjaCl7CiAgICAgICAga2IudmFsdWUgPSBrYk1hdGNoWzFdOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV4dHJhY3QgU0lUTQogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgbGV0IHNpdG1NYXRjaCA9IGlucHV0Lm1hdGNoKC9TSVRNLShcZCspUFNFLS8pOwogICAgaWYoc2l0bU1hdGNoKXsKICAgICAgICBzaXRtLnZhbHVlID0gc2l0bU1hdGNoWzFdOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV4dHJhY3QgQ0lQUwogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgbGV0IGNpcHNNYXRjaCA9IGlucHV0Lm1hdGNoKC9DSVBTLShbXiVdKykvKTsKICAgIGlmKGNpcHNNYXRjaCl7CiAgICAgICAgY2lwcy52YWx1ZSA9IGNpcHNNYXRjaFsxXTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBFeHRyYWN0IEVzY2FsYXRpb24KICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGxldCBlc2NhbGF0aW9uTWF0Y2gyID0gaW5wdXQubWF0Y2goLyUoW14lXSspJS8pOwogICAgaWYoZXNjYWxhdGlvbk1hdGNoMil7CiAgICAgICAgZXNjYWxhdGlvbi52YWx1ZSA9IGVzY2FsYXRpb25NYXRjaDJbMV07CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXh0cmFjdCBGQSBDYXB0dXJlCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICBsZXQgZmFNYXRjaCA9IGlucHV0Lm1hdGNoKC9cPyhZZXN8Tm8pXD8vKTsKICAgIGlmKGZhTWF0Y2gpewogICAgICAgIGZhLnZhbHVlID0gZmFNYXRjaFsxXTsKICAgIH0KCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICAvLyBFeHRyYWN0IFNvbHV0aW9uICsgRmVlZGJhY2sKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIGxldCBzb2xNYXRjaCA9IGlucHV0Lm1hdGNoKC89KFtePV0rKT0oW147XSspOy8pOwogICAgaWYoc29sTWF0Y2gpewogICAgICAgIHNvbHV0aW9uLnZhbHVlID0gc29sTWF0Y2hbMV0udHJpbSgpOwogICAgICAgIC8vIE1hcCB0cnVuY2F0ZWQgMy1jaGFyIGZlZWRiYWNrIGNvZGUgYmFjayB0byBmdWxsIG9wdGlvbgogICAgICAgIGNvbnN0IGZiQ29kZSA9IHNvbE1hdGNoWzJdLnRyaW0oKTsKICAgICAgICBjb25zdCBmYk9wdGlvbnMgPSBbCiAgICAgICAgICAiRkIuRjAxX05BIiwiRkIuRjAyX0R1cGxpY2F0ZSBMMyBJQyIsIkZCLkYwM19FeGlzdGluZyBSZXNvdXJjZXMgbm90IHVzZWQiLAogICAgICAgICAgIkZCLkYwNF9JbmNvbXBsZXRlIEluZm9ybWF0aW9uIiwiRkIuRjA1X0luY29ycmVjdCBQcm9jZXNzIEZvbGxvd2VkIiwiRkIuRjA2X0luY29ycmVjdCBUcm91YmxzaG9vdGluZyIsCiAgICAgICAgICAiRkIuRjA3X0ludmFsaWQgTDMgVHJpZ2dlciIsIkZCLlEwMV9QcmV2aW91c2UgcmVjb21tZW5kYXRpb24gbm90IGZvbGxvd2VkIiwKICAgICAgICAgICJGQi5RMDJfUVJUIEZlZWRiYWNrIC0gTWlzc2luZyBMb2dzL1BpY3R1cmVzL1ZpdGFsIERldGFpbHMiLCJGQi5RMDNfUVJUIEZlZWRiYWNrIC0gSW5jb3JyZWN0IFJvdXRpbmciLAogICAgICAgICAgIkZCLlEwNF9RUlQgRmVlZGJhY2sgLSBPdGhlciIsIkZCLlEwNV9RUlQgRmVlZGJhY2sgLSBFeGlzdGluZyBSZXNvdXJjZSBOb3QgdXNlZCIKICAgICAgICBdOwogICAgICAgIGNvbnN0IGZ1bGxGYiA9IGZiT3B0aW9ucy5maW5kKG9wdCA9PiBvcHQuc3Vic3RyaW5nKDAsNikgPT09IGZiQ29kZSkgfHwgZmJDb2RlOwogICAgICAgIGZlZWRiYWNrLnZhbHVlID0gZnVsbEZiOwogICAgfQoKICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0KICAgIC8vIEV4dHJhY3QgVG9vbAogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgbGV0IHRvb2xNYXRjaCA9IGlucHV0Lm1hdGNoKC9YMTQoW15YXSspWDE1Lyk7CiAgICBpZih0b29sTWF0Y2gpewogICAgICAgIHRvb2wudmFsdWUgPSB0b29sTWF0Y2hbMV07CiAgICB9CgogICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PQogICAgLy8gRXh0cmFjdCBDTENBCiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09CiAgICBsZXQgY2xjYU1hdGNoID0gaW5wdXQubWF0Y2goL1gxNihbXlhdKylYMTcvKTsKICAgIGlmKGNsY2FNYXRjaCl7CiAgICAgICAgY2xjYS52YWx1ZSA9IGNsY2FNYXRjaFsxXTsKICAgIH0KCiAgICAvLyBVcGRhdGUgZHluYW1pYyBpbmZvIGNlbGxzIGFmdGVyIHJldmVyc2UgZmlsbAogICAgdXBkYXRlU2l0bUluZm8oKTsKICAgIHVwZGF0ZUNpcHNJbmZvKCk7CiAgICB1cGRhdGVGYUluZm8oKTsKICAgIC8vIFJlLWV2YWx1YXRlIEdlbmVyYXRlIGJ1dHRvbiBhZnRlciByZXZlcnNlIGZpbGwKICAgIGNoZWNrR2VuZXJhdGUoKTsKfQoKZnVuY3Rpb24gcmVzZXRGb3JtKCl7CgogICAgLy8gUmVzZXQgc2VsZWN0cyB0byB0aGVpciBkZWZhdWx0IHZhbHVlcwogICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgic2VsZWN0IikuZm9yRWFjaChzPT57IHMuc2VsZWN0ZWRJbmRleCA9IDA7IH0pOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImVzY2FsYXRpb24iKS52YWx1ZSA9ICJOQSI7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmEiKS52YWx1ZSA9ICJObyI7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic29sdXRpb24iKS52YWx1ZSA9ICJUQkYiOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlZWRiYWNrIikudmFsdWUgPSAiRkIuRjAxX05BIjsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ0b29sIikudmFsdWUgPSAiTkEiOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImNsY2EiKS52YWx1ZSA9ICJObyI7CgogICAgLy8gUmVzZXQgQUxMIHRleHQtbGlrZSBpbnB1dHMKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0IikuZm9yRWFjaChpPT57CiAgICAgICAgaWYoaS50eXBlICE9PSAicmFkaW8iICYmIGkudHlwZSAhPT0gImNoZWNrYm94IiAmJiBpLnR5cGUgIT09ICJkYXRlIil7CiAgICAgICAgICAgIGkudmFsdWUgPSAiIjsKICAgICAgICB9CiAgICB9KTsKCiAgICAvLyBSZXNldCBGb2xsb3ctdXAKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb2xsb3dObyIpLmNoZWNrZWQgPSB0cnVlOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvbGxvd1llcyIpLmNoZWNrZWQgPSBmYWxzZTsKICAgIGZvbGxvd0RhdGUudmFsdWUgPSAiIjsKICAgIHRvZ2dsZURhdGUoKTsKCiAgICAvLyBSZXNldCByYWRpbyAoVFMgZGVmYXVsdCkKICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoImlucHV0W25hbWU9J2VzY2FsYXRpb25Gcm9tJ10iKS5mb3JFYWNoKHI9PnsKICAgICAgICByLmNoZWNrZWQgPSAoci52YWx1ZSA9PT0gIlRTIik7CiAgICB9KTsKCiAgICAvLyBSZXNldCBwcmlvcml0eSB0byBQMSBkZWZhdWx0CiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJpbnB1dFtuYW1lPSdmb2xsb3dQcmlvcml0eSddIikuZm9yRWFjaChyPT57CiAgICAgICAgci5jaGVja2VkID0gKHIudmFsdWUgPT09ICJQMSIpOwogICAgfSk7CgogICAgLy8gQ2xlYXIgb3V0cHV0IGFyZWFzCiAgICBvdXRwdXQudmFsdWUgPSAiIjsKICAgIHJldmVyc2VJbnB1dC52YWx1ZSA9ICIiOwoKICAgIC8vIEhpZGUgaXNzdWUgZHJvcGRvd24KICAgIGlzc3VlTGlzdC5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsKICAgIC8vIFJlc2V0IGR5bmFtaWMgaW5mbyBjZWxscwogICAgdXBkYXRlU2l0bUluZm8oKTsKICAgIHVwZGF0ZUNpcHNJbmZvKCk7CiAgICB1cGRhdGVGYUluZm8oKTsKICAgIGNoZWNrR2VuZXJhdGUoKTsKfQoJCmZ1bmN0aW9uIHVwZGF0ZVNpdG1JbmZvKCl7CiAgICBjb25zdCB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2l0bSIpLnZhbHVlLnRyaW0oKTsKICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2l0bUluZm8iKTsKICAgIGlmKHZhbCl7CiAgICAgICAgY29uc3QgdXJsID0gImh0dHBzOi8vamlyYS5ndGllLmRlbGwuY29tL2Jyb3dzZS9TSVRNLSIgKyB2YWw7CiAgICAgICAgY2VsbC5pbm5lckhUTUwgPSAnPHNwYW4gY2xhc3M9InB1bHNlLXRleHQiPioqKkFsZXJ0IC0gRW5zdXJlIHlvdXIgU0lUQyBpcyBsaW5rZWQgd2l0aCB0aGlzIFNJVE0qKio8L3NwYW4+PGJyPlNJVE0gbGluazogPGEgaHJlZj0iJyArIHVybCArICciIHRhcmdldD0iX2JsYW5rIiBzdHlsZT0iY29sb3I6IzViOWJkNTsgZm9udC13ZWlnaHQ6Ym9sZDsiPkxJTks8L2E+JzsKICAgIH0gZWxzZSB7CiAgICAgICAgY2VsbC50ZXh0Q29udGVudCA9ICJOdW1lcmljIFNJVE0gKEV4YW1wbGUgOiBGb3IgU0lUTS04ODAwLCBwbHMgZmlsbCBpbiA4ODAwKSI7CiAgICB9Cn0KCmZ1bmN0aW9uIHVwZGF0ZUNpcHNJbmZvKCl7CiAgICBjb25zdCB2YWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2lwcyIpLnZhbHVlLnRyaW0oKTsKICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2lwc0luZm8iKTsKICAgIGlmKHZhbCl7CiAgICAgICAgY29uc3QgdXJsID0gImh0dHBzOi8vamlyYS5ndGllLmRlbGwuY29tL2Jyb3dzZS9DSVBTLSIgKyB2YWw7CiAgICAgICAgY2VsbC5pbm5lckhUTUwgPSAnKioqQ0lQUyBMaW5rKioqIDxhIGhyZWY9IicgKyB1cmwgKyAnIiB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9ImNvbG9yOiM1YjliZDU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5MSU5LPC9hPic7CiAgICB9IGVsc2UgewogICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAiQ0lQUyByZWZlcmVuY2UiOwogICAgfQp9CgpmdW5jdGlvbiB1cGRhdGVGYUluZm8oKXsKICAgIGNvbnN0IHZhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmYSIpLnZhbHVlOwogICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmYUluZm8iKTsKICAgIGlmKHZhbCA9PT0gIlllcyIpewogICAgICAgIGNvbnN0IHVybCA9ICJodHRwczovL2RlbGwuc2hhcmVwb2ludC5jb20vc2l0ZXMvTDNTdHJpbmcvTGlzdHMvU3RyaW5nJTIwQ2FwdHVyZSUyMFRhZyUyMElucHV0L1ZpZXcxLmFzcHgiOwogICAgICAgIGNlbGwuaW5uZXJIVE1MID0gJzxzcGFuIGNsYXNzPSJibGluay10ZXh0Ij4qKipBbGVydCAtIEVuc3VyZSB5b3VyIGNhcHR1cmUgaXMgdXBkYXRlZCBpbiBDYXB0dXJlIFRyYWNraW5nIFRvb2wqKio8L3NwYW4+IDxhIGhyZWY9IicgKyB1cmwgKyAnIiB0YXJnZXQ9Il9ibGFuayIgc3R5bGU9ImNvbG9yOiM1YjliZDU7IGZvbnQtd2VpZ2h0OmJvbGQ7Ij5MSU5LPC9hPic7CiAgICB9IGVsc2UgewogICAgICAgIGNlbGwudGV4dENvbnRlbnQgPSAiRmFpbHVyZSBBbmFseXNpcyBjYXB0dXJlZCI7CiAgICB9Cn0KCmNvbnN0IHNvbHV0aW9uT3B0aW9ucyA9IFsKICAiVEJGIiwiSGFyZCBGaXggLURpc3BhdGNoIiwiSGFyZCBGaXggLU5vbiBEaXNwYXRjaCIsIkFwcHJvdmFsIiwiRGVsbCBJVCBUaWNrZXQiLAogICJFc2NhbGF0aW9uIFJldmlld2VkIiwiR3VpZGFuY2UgLSBTb2Z0ICYgSGFyZCBGaXhlcyIsImktUmV2IEFkdmFuY2VkIEZpcm13YXJlL0RyaXZlciIsCiAgIktCIFJlZmVyZW5jZSIsIk1JUksgQXBwcm92YWwiLCJOZXcgU29sdXRpb24iLCJObyBVcGRhdGUgZnJvbSBDdXN0b21lciIsCiAgIk5vIFVwZGF0ZSBmcm9tIFRTIiwiT3RoZXIiLCJTb2Z0IEZpeC1PU1JJIiwiU29mdCBGaXgtQklPUy9Ecml2ZXIgVXBkYXRlIiwKICAiU29mdCBGaXgtT3RoZXIiLCJTeXN0ZW0gRXhjaGFuZ2UiLCJXQUQiCl07Cgpjb25zdCBmZWVkYmFja09wdGlvbnMgPSBbCiAgIkZCLkYwMV9OQSIsIkZCLkYwMl9EdXBsaWNhdGUgTDMgSUMiLCJGQi5GMDNfRXhpc3RpbmcgUmVzb3VyY2VzIG5vdCB1c2VkIiwKICAiRkIuRjA0X0luY29tcGxldGUgSW5mb3JtYXRpb24iLCJGQi5GMDVfSW5jb3JyZWN0IFByb2Nlc3MgRm9sbG93ZWQiLCJGQi5GMDZfSW5jb3JyZWN0IFRyb3VibHNob290aW5nIiwKICAiRkIuRjA3X0ludmFsaWQgTDMgVHJpZ2dlciIsIkZCLlEwMV9QcmV2aW91c2UgcmVjb21tZW5kYXRpb24gbm90IGZvbGxvd2VkIiwKICAiRkIuUTAyX1FSVCBGZWVkYmFjayAtIE1pc3NpbmcgTG9ncy9QaWN0dXJlcy9WaXRhbCBEZXRhaWxzIiwiRkIuUTAzX1FSVCBGZWVkYmFjayAtIEluY29ycmVjdCBSb3V0aW5nIiwKICAiRkIuUTA0X1FSVCBGZWVkYmFjayAtIE90aGVyIiwiRkIuUTA1X1FSVCBGZWVkYmFjayAtIEV4aXN0aW5nIFJlc291cmNlIE5vdCB1c2VkIgpdOwoKZnVuY3Rpb24gZmlsdGVyU29sdXRpb24oKXsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzb2x1dGlvbiIpLnZhbHVlLnRvTG93ZXJDYXNlKCk7CiAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzb2x1dGlvbkxpc3QiKTsKICBsaXN0LmlubmVySFRNTCA9ICIiOwogIGNvbnN0IG1hdGNoZXMgPSBpbnB1dCA/IHNvbHV0aW9uT3B0aW9ucy5maWx0ZXIob3B0ID0+IG9wdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGlucHV0KSkgOiBzb2x1dGlvbk9wdGlvbnM7CiAgbWF0Y2hlcy5mb3JFYWNoKG9wdCA9PiB7CiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGRpdi5jbGFzc05hbWUgPSAiZHJvcGRvd24taXRlbSI7CiAgICBkaXYudGV4dENvbnRlbnQgPSBvcHQ7CiAgICBkaXYub25jbGljayA9ICgpID0+IHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNvbHV0aW9uIikudmFsdWUgPSBvcHQ7IGxpc3QuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7IH07CiAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7CiAgfSk7CiAgbGlzdC5jbGFzc0xpc3QudG9nZ2xlKCJoaWRkZW4iLCBtYXRjaGVzLmxlbmd0aCA9PT0gMCk7Cn0KCmZ1bmN0aW9uIGZpbHRlckZlZWRiYWNrKCl7CiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmVlZGJhY2siKS52YWx1ZS50b0xvd2VyQ2FzZSgpOwogIGNvbnN0IGxpc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmVlZGJhY2tMaXN0Iik7CiAgbGlzdC5pbm5lckhUTUwgPSAiIjsKICBjb25zdCBtYXRjaGVzID0gaW5wdXQgPyBmZWVkYmFja09wdGlvbnMuZmlsdGVyKG9wdCA9PiBvcHQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhpbnB1dCkpIDogZmVlZGJhY2tPcHRpb25zOwogIG1hdGNoZXMuZm9yRWFjaChvcHQgPT4gewogICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2Iik7CiAgICBkaXYuY2xhc3NOYW1lID0gImRyb3Bkb3duLWl0ZW0iOwogICAgZGl2LnRleHRDb250ZW50ID0gb3B0OwogICAgZGl2Lm9uY2xpY2sgPSAoKSA9PiB7IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmZWVkYmFjayIpLnZhbHVlID0gb3B0OyBsaXN0LmNsYXNzTGlzdC5hZGQoImhpZGRlbiIpOyB9OwogICAgbGlzdC5hcHBlbmRDaGlsZChkaXYpOwogIH0pOwogIGxpc3QuY2xhc3NMaXN0LnRvZ2dsZSgiaGlkZGVuIiwgbWF0Y2hlcy5sZW5ndGggPT09IDApOwp9CgpmdW5jdGlvbiBzaG93QWxsU29sdXRpb24oKXsKICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzb2x1dGlvbiIpLnZhbHVlLnRvTG93ZXJDYXNlKCk7CiAgY29uc3QgbGlzdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzb2x1dGlvbkxpc3QiKTsKICBsaXN0LmlubmVySFRNTCA9ICIiOwogIGNvbnN0IG1hdGNoZXMgPSBpbnB1dCA/IHNvbHV0aW9uT3B0aW9ucy5maWx0ZXIob3B0ID0+IG9wdC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGlucHV0KSkgOiBzb2x1dGlvbk9wdGlvbnM7CiAgbWF0Y2hlcy5mb3JFYWNoKG9wdCA9PiB7CiAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTsKICAgIGRpdi5jbGFzc05hbWUgPSAiZHJvcGRvd24taXRlbSI7CiAgICBkaXYudGV4dENvbnRlbnQgPSBvcHQ7CiAgICBkaXYub25jbGljayA9ICgpID0+IHsgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNvbHV0aW9uIikudmFsdWUgPSBvcHQ7IGxpc3QuY2xhc3NMaXN0LmFkZCgiaGlkZGVuIik7IH07CiAgICBsaXN0LmFwcGVuZENoaWxkKGRpdik7CiAgfSk7CiAgbGlzdC5jbGFzc0xpc3QudG9nZ2xlKCJoaWRkZW4iLCBtYXRjaGVzLmxlbmd0aCA9PT0gMCk7Cn0KCmZ1bmN0aW9uIHNob3dBbGxGZWVkYmFjaygpewogIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlZWRiYWNrIikudmFsdWUudG9Mb3dlckNhc2UoKTsKICBjb25zdCBsaXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZlZWRiYWNrTGlzdCIpOwogIGxpc3QuaW5uZXJIVE1MID0gIiI7CiAgY29uc3QgbWF0Y2hlcyA9IGlucHV0ID8gZmVlZGJhY2tPcHRpb25zLmZpbHRlcihvcHQgPT4gb3B0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoaW5wdXQpKSA6IGZlZWRiYWNrT3B0aW9uczsKICBtYXRjaGVzLmZvckVhY2gob3B0ID0+IHsKICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpOwogICAgZGl2LmNsYXNzTmFtZSA9ICJkcm9wZG93bi1pdGVtIjsKICAgIGRpdi50ZXh0Q29udGVudCA9IG9wdDsKICAgIGRpdi5vbmNsaWNrID0gKCkgPT4geyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZmVlZGJhY2siKS52YWx1ZSA9IG9wdDsgbGlzdC5jbGFzc0xpc3QuYWRkKCJoaWRkZW4iKTsgfTsKICAgIGxpc3QuYXBwZW5kQ2hpbGQoZGl2KTsKICB9KTsKICBsaXN0LmNsYXNzTGlzdC50b2dnbGUoImhpZGRlbiIsIG1hdGNoZXMubGVuZ3RoID09PSAwKTsKfQoKLy8gU2V0IGRlZmF1bHRzIG9uIHBhZ2UgbG9hZAp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibG9hZCIsIGZ1bmN0aW9uKCl7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic29sdXRpb24iKS52YWx1ZSA9ICJUQkYiOwp9KTsK"))</script>

</body>
</html>
